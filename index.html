<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#1b0033">
<title>Angga ‚ù§Ô∏è Tira</title>

<style>
html,body{
  margin:0;height:100%;
  background:radial-gradient(circle at top,#22003d,#000);
  font-family:Consolas,monospace;
  color:#fff;
  overscroll-behavior:none;
}
body{touch-action:pan-y;overflow-x:hidden}

.container{max-width:600px;margin:auto;padding:22px;position:relative;z-index:2}

.card{
  background:rgba(255,255,255,.08);
  border-radius:24px;
  padding:26px;
  margin-bottom:26px;
  box-shadow:0 0 30px rgba(255,120,200,.35);
  animation:fade .8s ease;
}
.hidden{display:none}

@keyframes fade{
  from{opacity:0;transform:translateY(25px) scale(.95)}
  to{opacity:1}
}

.code{
  background:#050013;
  border-radius:14px;
  padding:18px;
  color:#7cf3ff;
  font-size:14px;
  line-height:1.7;
}

.p{color:#ff7ad9}
.y{color:#ffe66d}
.g{color:#7CFF9B}

button{
  width:100%;
  max-width:280px;
  background:linear-gradient(135deg,#ff5db1,#ff8fd8);
  border:none;
  border-radius:30px;
  padding:12px;
  margin:10px auto;
  color:#fff;
  font-size:15px;
  cursor:pointer;
  display:block;
  transition:.3s;
}
button:hover{transform:scale(1.08);box-shadow:0 0 20px #ff9bdc}

#typing{white-space:pre-line;line-height:1.9}

.heart-rain{
  position:fixed;
  top:-10px;
  font-size:18px;
  animation:fall linear forwards;
  pointer-events:none;
  z-index:0;
}
@keyframes fall{to{transform:translateY(110vh);opacity:0}}
</style>
</head>

<body>

<audio id="bgm" loop>
<source src="https://cdn.pixabay.com/audio/2022/03/15/audio_7fcd5b1b7e.mp3">
</audio>

<div class="container">

<div class="card" id="p1">
<pre class="code">
<span class="p">import</span> rasa
<span class="p">def</span> mulai():
  tujuan=<span class="y">"Tira"</span>
  <span class="g">return</span> jatuh_cinta(tujuan)
</pre>
<button onclick="next('p2');playMusic()">Mulai ‚ñ∂</button>
</div>

<div class="card hidden" id="p2">
<pre class="code">
<span class="p">if</span> Tira.hadir:
  dunia.terasa=<span class="g">"cukup"</span>
</pre>
<button onclick="next('p3')">Lanjut</button>
</div>

<div class="card hidden" id="p3">
<pre class="code">
<span class="p">while</span> waktu.berjalan():
  aku.memilih(Tira)
</pre>
<button onclick="choose(1)">Senyum üòä</button>
<button onclick="choose(2)">Tenang ü§ç</button>
<button onclick="choose(3)">Bersama üíñ</button>
</div>

<div class="card hidden" id="p4">
<pre class="code" id="out"></pre>
<button onclick="next('p5')">Teruskan</button>
</div>

<div class="card hidden" id="p5">
<pre class="code">
<span class="p">try</span>:
  masa_depan+=Tira
<span class="p">except</span>:
  aku.tetap_memilih()
</pre>
<button onclick="next('p6')">Baca Cerita</button>
</div>

<div class="card hidden" id="p6">
<h3>Untuk Tira ü§ç</h3>
<p id="typing"></p>
<button onclick="next('p7')">Halaman Terakhir</button>
</div>

<div class="card hidden" id="p7">
<h3>FINAL üíó</h3>
<p>Status: <b>Kita</b></p>
<button id="no" onmouseover="escapeNo()">Nggak</button>
<button onclick="yes()">Iya ‚ù§Ô∏è</button>
</div>

</div>

<script>
function playMusic(){
  const a=document.getElementById("bgm");
  if(a.paused)a.play();
}
document.body.addEventListener("touchstart",playMusic,{once:true});

function next(id){
  vibrate();
  document.querySelectorAll('.card').forEach(c=>c.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

let sx=0;
document.addEventListener("touchstart",e=>sx=e.touches[0].clientX);
document.addEventListener("touchend",e=>{
  if(e.changedTouches[0].clientX-sx>80)autoNext();
});
function autoNext(){
  const c=[...document.querySelectorAll('.card')];
  const i=c.findIndex(x=>!x.classList.contains('hidden'));
  if(i<c.length-1){vibrate();c[i].classList.add('hidden');c[i+1].classList.remove('hidden')}
}

function vibrate(){navigator.vibrate&&navigator.vibrate(20)}

function choose(x){
  out.innerText=x==1?"print('Senyummu selalu menemukan jalannya')":
                x==2?"print('Tenang adalah namamu di hatiku')":
                      "print('Bersama adalah rumah')";
  next('p4');
}
function escapeNo(){
  const b=document.getElementById("no");
  b.style.position="absolute";
  b.style.left=Math.random()*80+"%";
  b.style.top=Math.random()*80+"%";
}
function yes(){alert("Pilihan terkunci selamanya ü§ç")}

/* ===== NOVEL TEXT ===== */
const text=`
Tira,

Ada pagi yang terasa lebih ringan hanya karena aku tahu
aku akan menjalani hari ini bersamamu.
Bukan karena dunia tiba-tiba menjadi mudah,
tapi karena kehadiranmu membuatku tidak sendirian
menghadapinya.

Bersamamu,
aku belajar bahwa cinta tidak selalu harus riuh.
Ia bisa hadir dalam hal-hal kecil,
dalam percakapan sederhana,
dalam diam yang tidak canggung,
dan dalam tawa yang datang tanpa direncanakan.

Aku menyukai caramu mengisi ruang.
Kamu tidak mengambil semuanya,
tidak pula meninggalkan kekosongan.
Kamu hadir secukupnya,
namun entah bagaimana selalu tepat.

Hari-hari kita berjalan tanpa peta.
Kadang lurus,
kadang berbelok,
kadang melambat.
Tapi setiap langkah yang kulalui bersamamu
selalu terasa benar,
seolah hatiku tahu
aku sedang berada di tempat yang seharusnya.

Aku tidak ingin mencintaimu dengan janji besar
yang diucapkan keras-keras.
Aku ingin mencintaimu dengan kehadiran.
Dengan memilihmu setiap hari,
bahkan di hari-hari biasa
yang tidak terlihat istimewa bagi siapa pun.

Jika suatu saat dunia terasa bising,
aku ingin menjadi tempatmu pulang.
Jika langkahmu goyah,
aku ingin berjalan di sampingmu.
Dan jika kita harus diam,
aku ingin diam itu terasa hangat.

Ini bukan cerita tentang kesempurnaan.
Ini cerita tentang dua orang
yang saling memilih untuk tinggal,
untuk tumbuh,
dan untuk belajar
tanpa saling meninggalkan.

Terima kasih sudah bersamaku.
Terima kasih sudah menjadi bagian dari hari-hariku.
Jika cinta adalah perjalanan,
aku ingin terus berjalan,
selangkah demi selangkah,
bersamamu,
Tira. ü§ç
`;

let i=0;
(function type(){
  if(i<text.length){
    typing.innerHTML+=text[i++];
    setTimeout(type,32);
  }
})();

/* ===== HEART RAIN ===== */
setInterval(()=>{
  const h=document.createElement("div");
  h.className="heart-rain";
  h.innerText=Math.random()>.5?"üíó":"üíñ";
  h.style.left=Math.random()*100+"vw";
  h.style.animationDuration=(innerWidth<768?5:3)+"s";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),6000);
},innerWidth<768?450:300);

/* ===== INLINE PWA ===== */
if('serviceWorker'in navigator){
  const sw=`self.addEventListener('fetch',e=>{e.respondWith(fetch(e.request).catch(()=>caches.match(e.request)))})`;
  navigator.serviceWorker.register(URL.createObjectURL(new Blob([sw])));
}
</script>

</body>
</html>
